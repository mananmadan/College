function [y1] = myNeuralNetworkFunction(x1)
%MYNEURALNETWORKFUNCTION neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 14-Sep-2020 16:34:10.
%
% [y1] = myNeuralNetworkFunction(x1) takes these arguments:
%   x = 14xQ matrix, input #1
% and returns:
%   y = 3xQ matrix, output #1
% where Q is the number of samples.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [0;0;0;0;0;0;0;0;-1;-1;0.026;0;0.00877358;0];
x1_step1.gain = [2;2;2;2;2;2;2;2;1;1;2.0639834881321;2.25225225225225;2.06688134536448;2.13089899432222];
x1_step1.ymin = -1;

% Layer 1
b1 = [0.30092697596376088987;0.19257890735721597264;-0.0034827150133269215403;0.061638600893980446949;0.37071527840350348981;0.16416225419977764632;-0.10310543240417263666;-0.097084689535669524418;-0.058652204037336987119;-0.01599261640986966021;0.11753350051657943109;-0.24675619644952803688;-0.31034678617073396811;0.32245513620610705141;-0.1934445761381046458;-0.17224473130717268821;-0.26364825360505250718;-0.19230226088862234501;-0.37622318487540395981;0.070637717763846169516];
IW1_1 = [-0.23291672818512540455 -0.12725667664777132182 -0.14825208173110013266 -0.24352476995664168458 -0.2875754564266147506 -0.22104600444866093212 -0.24406316241851938598 1.7457866959700865106 -1.3060394099655840972 -0.15572291050621736574 -0.2946170249553916598 0.016431904145810392187 0.20742838656455137025 -0.029654380339795460148;-0.65082337510791921087 -0.67121099184657406767 0.66671072535322561947 0.29138172335755629927 -0.074060501867012601407 0.47225387639339350132 -0.99714599306923357158 -0.47261766139186939251 -0.63827492875365765546 -0.049947163408581726762 1.6035507218901827731 3.4834683900569602955 -0.28851247397106521975 -1.0840687570572993259;-0.030585552999776367822 -0.024920403722893964132 0.10727668271392352961 -0.10828583329316453232 0.073736023644746948036 -0.042828311296963107735 0.043020970014752663024 -0.042991064480266114045 0.078668986905875121218 -0.08217880065087440622 0.30662330485464200924 0.13304706025451737417 -0.13175780197900430202 0.27965962441409381034;-0.60333527284429167015 0.11455163772692811275 0.26764145392943594626 0.38148234951008275218 0.092812398763572667715 0.26226754374241945111 -0.82361311529737113446 -0.11390788472617362215 -0.043478500356032692697 -0.0096220150904592245678 0.78745074067767584225 0.024266946187412458125 -0.5041304906549678444 -0.073923652271546139159;-0.57626569003614735998 -1.4693899426395433672 -0.62577837818338211129 0.68835443713636146335 0.40199474172376264969 0.24442565076957070702 -0.51691721078961960778 0.14999667777088862564 0.020466965161676710372 0.28171642267647351021 1.7721568656073791725 2.8968631988147630629 0.36067243411253346874 -0.26411675568024262084;0.49883323595426709574 -0.73258569945913043497 0.17548998471816315559 0.099743504395426244025 0.058647827307950053943 -0.61533515457888499078 -0.30560496934154252058 0.55897484288252319296 0.34038363598625148709 0.19906454874718751413 2.0507066007025982479 1.222012945455758226 0.65130476105487800087 -1.5674983386981526934;0.3817984199559035785 0.07113458642722100822 0.003155912887378761484 -0.2230343113223756113 0.033220595392278083613 -0.13031512379002441193 0.37956708247575393633 0.092696355239214198174 0.034635077594597267481 -0.083116175465459879446 -1.7309058826242968987 0.27071164453752449841 0.072596817571876220976 0.2493080791703123078;-0.93650696883578399277 0.12702692501225859578 -0.48027779741303483485 0.56447032881988545849 0.64623178240668321948 0.67319658234685220144 -0.10871740466544027592 0.32491609169415930358 -0.19693843098968905059 -0.03451188603340745592 -0.44156659576517148791 -1.0249932489226110111 0.2312669327990956869 1.0026679723706837244;-0.79677704195577869761 0.32359539394803943368 -0.66505239965440432481 0.49383862809752937517 0.62962751711910025509 0.6841493305936764413 -0.37612040795453760555 0.072090523402374331874 -0.11886189158370810692 -0.098318403843315610446 -1.388613689197692791 -0.95229232709079048025 0.042733059462299861908 0.87683795915459528114;0.41465495190975193429 -0.16040076145534748475 -0.063651422886990147165 -0.31303179190979774082 0.069107022871058979008 -0.23795858954067594659 0.3712436730738174484 0.090369518652484617793 -0.043771749903204947019 -0.13123794443779554508 -2.5270385282563267992 0.56283431282230356185 -0.29694193498479243276 0.87673455354274265616;-0.54433761842802774744 -0.048465521712174282343 0.20843390315738777319 -0.031059951105793313919 0.17253696086083555872 0.008476368984595993028 -0.35325164434222494636 0.24722851448134353092 0.0024024897927031104577 -0.064725467655511625953 -0.89243980863204430687 0.13784601916279010103 0.26110334859840794719 0.38291054512845901225;-0.0031326729737327172615 -0.12534423870716468463 -0.24377635981401354903 0.14362110883317139032 1.3865461751690035808 0.098448058441827648868 -0.022581088698289165234 0.20871241094713249842 0.27731133830138482432 0.3974130329014916585 3.1008534490893553404 -0.62142773073455448429 0.31103560661285284406 -0.52450698968013909074;0.53257281913539677998 1.1769642334590377786 0.34897146428028319454 -0.55136820974850808685 -0.29139696220489713641 -0.18960686884951438724 0.52559745478493136162 -0.27836578246696719319 0.041932273387801276276 -0.25987930186581281733 -1.7949576307680603637 -2.7688762354782512354 -0.40838448546164374253 0.068377665921639810276;-0.17847769007464536761 -0.32335330927753075381 -0.36471674686072508287 -0.15811457630105521521 -0.23339787749329934941 -0.14130654206961512642 -0.21290893895705909067 1.8556355834821878226 -1.2708132487450152226 -0.24532007430642768786 0.12612856935511509993 -0.054053108009624956098 -0.33384836662662609186 0.17538090970103595301;-0.23579158896292215508 -0.42610617741873574316 0.25462130040348618376 -1.2928265890605314947 2.518847176068460314 -0.35462742170431310607 0.5031061813638543212 -0.25493173144992037349 0.10686050033870417297 -0.55227229182083070747 -2.7647061360828111276 1.0290046825743626169 -0.50941249593869364354 -0.64717853987288920248;-0.15912851326492807869 0.11367703041864717084 0.22197349766556595529 0.088000622221415109037 0.18139724184170655241 0.14045693031146938567 0.27484684734010778051 -0.33297095070289206564 0.4062419824705428284 0.14409892309599389715 0.03648435760077144846 -0.58150864827831660886 0.25082357144634709334 -0.94320995544967622948;0.31807293520333485004 0.3523541410013152908 0.29097416750015964171 -0.0089382472014935335225 0.2708352040304040087 0.038866833051670719723 0.056076234454382527239 -0.25676707040895535572 -0.96767446356312802891 0.30471033774437250585 0.98798690325971261217 -0.50522317949549588878 0.35426757360262595142 -0.13329958533963898182;0.17394875884176191905 0.19189481828577489853 0.62079754170649625866 -0.40214299316990015365 -0.07885698987657574488 -0.27969140783763907221 0.73556157648352549216 -0.03247389177419889722 -0.026540212593792349149 0.17600817947301880539 0.57142572296557392342 -0.6712837569613284705 0.23841184479523858109 0.21324878027692995008;0.14005703264683452836 0.31626376645575599023 0.23893631290470454531 0.49250321198996094285 0.31270853324332742451 0.38099058126776530475 -0.0003435141320801425634 0.0054539418589742471102 -0.014297027080693282264 0.083847400098427005144 1.8936538464875571908 0.52738554858937181091 0.051905423569482453394 -0.40006631959001498489;0.11057605113731941437 0.064774542468174156618 0.1932755460363676514 -0.40717815524484668455 0.25936301512736142927 -0.11506816775310803325 -0.4589314205851418027 0.1755013278341363836 0.38869900534636275813 0.17397332594385031546 1.7831855931942479643 -0.94084934267508468775 -0.10374638794002050135 0.94295626334162785387];

% Layer 2
b2 = [-0.23671600979507653739;0.38347736015471911575;-0.34193303508183742201];
LW2_1 = [-1.7669632220124944499 -0.27462662921666913807 1.0604652987417095833 -1.3233611183170805869 -1.240391105649481629 -0.36983299304452205147 -0.76460410203136708329 0.67935250572830063742 -1.2477083466881968565 0.093924697550122893119 1.528058608597262058 0.37412476716953008138 -1.3978933193768843246 1.5197542793756084745 -0.60485748182386722682 0.88209464691772232481 0.74726249046997206271 -1.4551467295463045293 -0.55584801661167471121 -0.37363852747726994386;-0.085742115418462300225 0.027167252511555821382 0.52481002001410270719 -0.47967363597205830983 -0.35769507923711946207 0.029532984160042116684 -0.88545720011563022744 -0.05555293537494564865 0.14109924155499137255 0.26959816872095193618 0.096812750807066999537 -0.058021514477352875705 -0.36973713285253662075 0.12045432770706654413 -0.068266801995837234074 0.12975994468231996648 0.14693128195681920412 -0.17729185351302631513 0.48134307143764093473 0.021034791505761315372;0.018826234830995415559 0.26759514278815493826 -2.212150887650744302 -0.1104389771459255154 0.48370553202513744129 0.3613902472164850499 -0.93851410170161120305 -0.8170364834912235974 1.2839459294188741989 0.6931909092770623948 -0.02385987889807389753 -0.42862333066680496918 0.663956119391652555 -0.15518304657381926104 0.4158067311880366268 -0.38610584299830297272 -0.74884365416632769907 0.86319557184197193145 0.60513618536907920475 0.53913158466363153565];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [4.6518443399847;3.33333333333333;3.10405827683171];
y1_step1.xoffset = [0.259145;0.075;0.0818182];

% ===== SIMULATION ========

% Dimensions
Q = size(x1,2); % samples

% Input 1
xp1 = mapminmax_apply(x1,x1_step1);

% Layer 1
a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*xp1);

% Layer 2
a2 = repmat(b2,1,Q) + LW2_1*a1;

% Output 1
y1 = mapminmax_reverse(a2,y1_step1);
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
y = bsxfun(@minus,x,settings.xoffset);
y = bsxfun(@times,y,settings.gain);
y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
x = bsxfun(@minus,y,settings.ymin);
x = bsxfun(@rdivide,x,settings.gain);
x = bsxfun(@plus,x,settings.xoffset);
end
